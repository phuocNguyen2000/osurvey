<!DOCTYPE html>
<html>
    <head>
        <title>WebSocket demo</title>
        <script src="./jquery.min.js"></script>
    </head>
    <body>
        <input type="text" name="" id="name">
        <input type="text" name="" id="pass">
        <button id="btn" >click me</button>
        <form action="" method="post" enctype="multipart/form-data">
            <input data-v-9c8ee458="" type="file" accept="image/*" style="display: none;">
            <button type="submit">OK</button>
        </form>
        <script>
            var ws = new WebSocket("ws://127.0.0.1:5000/echo"),
                messages = document.createElement('ul');
            ws.onmessage = function (event) {
                var messages = document.getElementsByTagName('ul')[0],
                    message = document.createElement('li'),
                    content = document.createTextNode(JSON.parse(event.data)[0].name);
                    console.log(event.data)
                message.appendChild(content);
                messages.appendChild(message);
                
            };
            document.getElementById("btn").onclick=function(){
                ws.send(JSON.stringify({"name":$('#name').val(),"pass":$('#pass').val()}))
            }
            document.body.appendChild(messages);
        </script>
        
    </body>
</html>